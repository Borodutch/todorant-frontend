(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-799b3304"],{"0aa9":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"v-container pa-4 text-center"},[i("p",{domProps:{innerHTML:e._s(e.$t("loginMobile.telegram.headline"))}}),i("v-text-field",{attrs:{clearable:"",label:e.$t("loginMobile.telegram.id"),hint:e.$t("loginMobile.telegram.idHint"),autofocus:""},model:{value:e.id,callback:function(t){e.id=t},expression:"id"}}),i("v-btn",{attrs:{color:"primary",loading:e.loading||e.checking},on:{click:e.login}},[e._v(e._s(e.$t("loginMobile.telegram.loginButton")))]),e.checking?i("p",{staticClass:"pt-2",domProps:{innerHTML:e._s(e.$t("loginMobile.telegram.waiting"))}}):e._e()],1)},a=[]},2986:function(e,t,i){"use strict";i.r(t);var n=i("0aa9"),a=i("2a6d");for(var l in a)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(l);var o=i("2877"),r=Object(o.a)(a.default,n.a,n.b,!1,null,null,null);t.default=r.exports},"2a6d":function(e,t,i){"use strict";i.r(t);var n=i("a340"),a=i.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(l);t.default=a.a},a340:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i("9ab4"),a=(0,n.__importDefault)(i("2b0e")),l=(0,n.__importDefault)(i("2fe1")),o=i("fe0b"),{vueTelegramLogin:r}=i("d226"),s=i("e144"),c=(0,n.__importStar)(i("97e5"));let d=class extends a.default{constructor(){super(...arguments),this.id="",this.loading=!1,this.checking=!1,this.loginId=""}mounted(){setInterval((()=>{this.check()}),5e3)}async login(){if(this.id||this.id){this.loginId=(0,s.v4)();try{this.loading=!0,await c.telegramLoginRequest(this.loginId,this.id),this.checking=!0}catch(e){const t=e;"Request failed with status code 404"===t.message?alert(o.i18n.t("loginMobile.telegram.cannotSendMessageError")):alert(t.message)}finally{this.loading=!1}}else alert(o.i18n.t("loginMobile.telegram.noCredentialsError"))}async check(){if(!this.checking||!this.loginId)return;const e=(await c.checkTelegramLoginRequest(this.loginId)).data;void 0!==e.allowed&&(!1===e.allowed?(alert(o.i18n.t("loginMobile.telegram.notAllowedError")),this.checking=!1,this.loginId=""):!0===e.allowed&&(window.location.href="https://todorant.com/mobile_login_success?data="+JSON.stringify(e.user)))}};d=(0,n.__decorate)([l.default],d),t.default=d}}]);